<% include partials/headerLogin %>
<% include partials/leftNavbar %>


<div class="col-11">
  <div class="section-assets">
    <div class="row border">
      <div class="col-md-2">
        <input type="text" class="form-control search" id="search" placeholder="Wyszukaj">
        <ul class="ul">
          <div class="list-group" id="list-tab" role="tablist">
            <% for(var i=0; i < workers.length; i++) { %>
            <li class="list-group-item list-group-item-action" onclick="hide()"
              id="list-<%= workers[i].IdPracownik %>-list" data-toggle="list"
              href="#list-<%= workers[i].IdPracownik %>" role="tab" aria-controls="<%= workers[i].IdPracownik%>">
              <b><%= workers[i].Imie %> <%= workers[i].Nazwisko %> </b> </li>
            <%}%>       
          </div>
        </ul>
        <div class="row">
          <button type="button" class="btn btn-success" onclick="myFunction()">Dodaj pracownika</button>
          <button type="button" class="btn btn-success" onclick="teams()">Zespoly</button>
        </div>
    </div>
<div class="col-md-8" >
    <div id="infoPanel">
    <div class="tab-content" id="nav-tabContent">
        <% for(var i=0; i < workers.length; i++) { %>
            <div class="tab-pane fade show " id="list-<%= workers[i].IdPracownik %>" role="tabpanel"
                aria-labelledby="list-<%= workers[i].IdPracownik %>-list">
                <div class="row asset-name">
                    <h2><%= workers[i].Imie %> <%= workers[i].Nazwisko %></h2>
                  </div>
                  <p>Email: <%= workers[i].Email %></p>
                  <p>Numer telefonu:<%= workers[i].NumerTelefonu %></p>
                  <button type="button" class="btn btn-light"
                  onclick="edit('<%= workers[i].Imie %>', '<%= workers[i].Nazwisko %>', '<%= workers[i].Email %>', '<%= workers[i].NumerTelefonu %>', '<%= workers[i].IdPracownik %>')"><i
                    class="fa fa-edit"></i></button>
            </div>
        <% } %>
    </div>
  </div>

  <div id="editPanel">
    <div class="tab-pane fade show " role="tabpanel" >
      <h2>Dodawanie pracownika</h2>
      <p>Podaj dane nowego pracownika</p>
      <form action="addHuman" method="POST">
      <input type="text" class="form-control addAssets" id="name" name="name" placeholder="Imię" required>
      <input type="text" class="form-control addAssets" id="lastName" name="lastName" placeholder="Nazwisko" required>
      <input type="number" class="form-control addAssets" id="telephone" name="telephone" placeholder="Numer telefonu" required>
      <input type="email" class="form-control addAssets" id="email" name="email" placeholder="Email" required>
      <input type="file" class="form-control addAssets" id="" name="" placeholder="Umowa" >
      <select class="form-control createAccount" placeholder="Przełożony" id="superior" name="superior" required>
          <% for(var i=0; i < workers.length; i++) { %>
            <option value="<%=workers[i].IdPracownik %>"><%= workers[i].Imie %> <%= workers[i].Nazwisko %></option>
          <%}%>
      </select>
       
      </select>
      <button type="button" onclick="cancel()" class="btn btn-danger">Anuluj</button>
    <button type="submit" class="btn btn-success">Zapisz</button>
    </form>
    </div>
  </div>
    
    <div id="edit">
        <div class="tab-pane fade show " role="tabpanel" >
          <h2>Edytowanie przedmiotu</h2>
          <p>Podaj nowe dane</p>
          <form action="editHr" method="POST">
          <input type="text" class="form-control addAssets" id="firstNameEdit" name="firstNameEdit" placeholder="Imię">
          <input type="text" class="form-control addAssets" id="lastNameEdit" name="lastNameEdit" placeholder="Nazwisko">
          <input type="email" class="form-control addAssets" id="emailEdit" name="emailEdit" placeholder="Email">
          <input type="number" class="form-control addAssets" id="telephoneEdit" name="telephoneEdit" placeholder="Numer telefonu">
          <input type="hidden" id="idEdit" name="idEdit" value="">
          </select>
          <button type="button" onclick="cancel()" class="btn btn-danger">Anuluj</button>
          <button type="submit" class="btn btn-success">Zapisz</button>
        </form>
        </div>
      </div>

      <div id="teamsManage">
        <div class="tab-pane fade show " role="tabpanel" >
          <h2>Edytowanie przedmiotu</h2>
          <p>Podaj nowe dane</p>
          fff
        </form>
        </div>
      </div>
  </div>
</div>
</div>
</div>


<script>
  function myFunction() {
    var y = document.getElementById("infoPanel");
    var x = document.getElementById("editPanel");
    var z = document.getElementById("edit");
    var a = document.getElementById("teamsManage");
    a.style.display="none";
    z.style.display = "none";
    y.style.display = "none";

    if (x.style.display === "none") {
      x.style.display = "block";
    } else {
      x.style.display = "none";
    }

    

  }

  function teams() {
    var y = document.getElementById("infoPanel");
    var x = document.getElementById("editPanel");
    var z = document.getElementById("edit");
    var a = document.getElementById("teamsManage");
    z.style.display = "none";
    y.style.display = "none";
    x.style.display = "none";
    
    if (a.style.display === "none") {
      a.style.display = "block";
    } else {
      a.style.display = "none";
    }

  }

  function hide() {
    var z = document.getElementById("edit");
    var x = document.getElementById("editPanel");
    var y = document.getElementById("infoPanel");
    var a = document.getElementById("teamsManage");
    x.style.display = "none";
    y.style.display = "block";
    z.style.display = "none";
    a.style.display = "none";
  }

  function cancel() {
    var z = document.getElementById("edit");
    z.style.display = "none";
    var x = document.getElementById("editPanel");
    x.style.display = "none";
    document.getElementById("name").value = "";
    document.getElementById("description").value = "";
    document.getElementById("type").value = "";
    document.getElementById("price").value = "";
    document.getElementById("date").value = "";
    document.getElementById("owner").value = "";
    var y = document.getElementById("infoPanel");
    y.style.display = "block";
  }

  function edit(firstName, lastName, email, telephone, id) {
    var y = document.getElementById("editPanel");
    y.style.display = "none";

    var z = document.getElementById("infoPanel");
    z.style.display = "none";

    document.getElementById("firstNameEdit").value = firstName;
    document.getElementById("lastNameEdit").value = lastName;
    document.getElementById("telephoneEdit").value = telephone;
    document.getElementById("emailEdit").value = email;
    document.getElementById("idEdit").value = id;

    var x = document.getElementById("edit");
    x.style.display = "block";

  }

  $(function () {
    $('#search').keyup(function () {
      var current_query = $('#search').val();
      if (current_query !== "") {
        $(".list-group li").hide();
        $(".list-group li").each(function () {
          var current_keyword = $(this).text();
          if (current_keyword.indexOf(current_query) >= 0) {
            $(this).show();
          };
        });
      } else {
        $(".list-group li").show();
      };
    });
  });

</script>
<% include partials/footerLogin %>